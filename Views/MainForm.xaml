<Window x:Class="Exchange_appl.Views.MainForm"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainForm" WindowState="Maximized" Width="800"
        xmlns:local ="clr-namespace:Exchange_appl.Views"
        xmlns:vms = "clr-namespace:Exchange_appl.ViewModels">
    <Window.Resources>
        <!--<local:ImagePathConverter x:Key="ImagePathConverter"/> -->
        <!-- Стиль для TabControl -->
        <Style x:Key="CustomTabControlStyle" TargetType="TabControl">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="Black"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="5"/>
        </Style>


        <!-- Стиль для кнопки просмотр -->
        <Style x:Key="NoStyleButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <ContentPresenter />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


        <!-- Стиль для TabItem -->
        <Style x:Key="CustomTabItemStyle" TargetType="TabItem">
            <Setter Property="Background" Value="Black"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Padding" Value="30,15"/>
            <Setter Property="MinWidth" Value="304"/>
            <Setter Property="MaxWidth" Value="304"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border x:Name="Border" Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="5">
                            <ContentPresenter ContentSource="Header" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="Gainsboro"/>
                                <Setter Property="Foreground" Value="Black"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для кнопки -->
        <Style x:Key="CustomButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Green"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                CornerRadius="5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#66CC66"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#4CAF50"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <!-- Margin для отступа от краёв окна -->
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel HorizontalAlignment="Stretch" Width="Auto">
                <TextBlock FontSize="28" Foreground="Black" Margin="0,10" TextAlignment="Center">Головна сторінка</TextBlock>

                <TabControl x:Name="MainTabControl" Margin="0,10" Style="{StaticResource CustomTabControlStyle}" HorizontalAlignment="Stretch">

                    <!-- Вкладка "Всі речі" -->

                    <!-- Вкладка "Всі речі" -->
                    <TabItem Header="Всі речі" x:Name="AllItemsTab" Style="{StaticResource CustomTabItemStyle}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalAlignment="Stretch">
                            <StackPanel Background="White" Margin="10">
                                <TextBlock FontSize="24" Foreground="Black" HorizontalAlignment="Left" Margin="10,0,0,10">Всі речі</TextBlock>

                                <!-- Фильтрация по категориям -->
                                <Grid Margin="0,0,0,10" Height="37">
                                    <ComboBox x:Name="CategoryFilterComboBox"
                          SelectedValue="{Binding SelectedCategory, Mode=TwoWay}"
                          SelectedValuePath="Content"
                          Width="200"
                          HorizontalAlignment="Left"
                          Margin="10,10,0,0">
                                        <ComboBoxItem Content="Всі" IsSelected="True" />
                                        <ComboBoxItem Content="Електроніка" />
                                        <ComboBoxItem Content="Одяг" />
                                        <ComboBoxItem Content="Взуття" />
                                        <ComboBoxItem Content="Аксесуари" />
                                        <ComboBoxItem Content="Іграшки" />
                                        <ComboBoxItem Content="Меблі" />
                                        <ComboBoxItem Content="Ремонт" />
                                        <ComboBoxItem Content="Авто" />
                                        <ComboBoxItem Content="Тварини" />
                                        <ComboBoxItem Content="Хобі та Розваги" />
                                        <ComboBoxItem Content="Спорт" />
                                        <ComboBoxItem Content="Інше" />
                                    </ComboBox>
                                </Grid>

                                <!-- Привязка элементов -->
                                <ItemsControl ItemsSource="{Binding FilteredItems}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Button CommandParameter="{Binding}" Click="ItemButton_Click" Style="{StaticResource NoStyleButton}">
                                                <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Margin="10,5" Padding="10">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="150" />
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                            <TextBlock Text="{Binding ItemName}" FontSize="18" FontStyle="Italic" FontWeight="Bold" Margin="0,0,0,10" />

                                                            <!-- В одному рядку: Категорія -->
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="Категорія: " FontWeight="Bold" />
                                                                <TextBlock Text="{Binding Category}" />
                                                            </StackPanel>

                                                            <!-- В одному рядку: Категорія обміну -->
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="Категорія обміну: " FontWeight="Bold" />
                                                                <TextBlock Text="{Binding ExchangeCategory}" />
                                                            </StackPanel>
                                                            
                                                            <!-- В одному рядку: Автор -->
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="Автор: " FontWeight="Bold" />
                                                                <TextBlock Text="{Binding AuthorPhone}" />
                                                            </StackPanel>
                                                        </StackPanel>
                                                        <Image Source="{Binding Image}" Width="150" Height="150" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Grid>
                                                </Border>
                                            </Button>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>




                    <!-- Вкладка "Мої речі" -->
                    <TabItem Header="Мої речі" x:Name="MyItemsTab" Style="{StaticResource CustomTabItemStyle}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalAlignment="Stretch">
                            <StackPanel Background="White" Margin="10">
                                <TextBlock FontSize="24" Foreground="Black" HorizontalAlignment="Left" Margin="10,0,0,10">Ваші речі</TextBlock>

                                <!-- Привязка элементов -->
                                <ItemsControl ItemsSource="{Binding UserItems}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Button CommandParameter="{Binding}" Click="ItemButton_Click" Style="{StaticResource NoStyleButton}">
                                                <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Margin="10,5" Padding="10">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="150" />
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                            <TextBlock Text="{Binding ItemName}" FontSize="18" FontStyle="Italic" FontWeight="Bold" Margin="0,0,0,10" />

                                                            <!-- В одном рядку: Категорія -->
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="Категорія: " FontWeight="Bold" />
                                                                <TextBlock Text="{Binding Category}" />
                                                            </StackPanel>

                                                            <!-- В одном рядку: Категорія обміну -->
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="Категорія обміну: " FontWeight="Bold" />
                                                                <TextBlock Text="{Binding ExchangeCategory}" />
                                                            </StackPanel>

                                                            <!-- В одном рядку: Автор -->
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="Автор: " FontWeight="Bold" />
                                                                <TextBlock Text="{Binding AuthorPhone}" />
                                                            </StackPanel>
                                                        </StackPanel>
                                                        <Image Source="{Binding Image}" Width="150" Height="150" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Grid>
                                                </Border>
                                            </Button>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>


                    <!-- Вкладка "Додати річ" -->
                    <TabItem Header="Додати річ" x:Name="AddItemTab" Style="{StaticResource CustomTabItemStyle}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <Grid Background="White" Margin="10">
                                <StackPanel Margin="10">
                                    <TextBlock FontSize="24" Foreground="Black" Margin="0,0,0,10" HorizontalAlignment="Center">Форма для додавання речі</TextBlock>

                                    <!-- Назва речі -->
                                    <StackPanel Orientation="Horizontal" Margin="0,5">
                                        <Label Content="Назва речі:" Width="207" VerticalAlignment="Center"/>
                                        <TextBox Name="TitleTextBox" Width="300" Height="30" MaxLength="50" ToolTip="Введіть назву"/>
                                    </StackPanel>

                                    <!-- Опис речі -->
                                    <StackPanel Orientation="Horizontal" Margin="0,5">
                                        <Label Content="Опис речі:" Width="208" VerticalAlignment="Top"/>
                                        <TextBox Name="DescriptionTextBox" Width="520" Height="154" TextWrapping="Wrap" MaxLength="1000" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" ToolTip="Введіть опис" />
                                    </StackPanel>

                                    <!-- Категорія -->
                                    <StackPanel Orientation="Horizontal" Margin="0,5">
                                        <Label Content="Категорія речі:" Width="206" VerticalAlignment="Center" Height="51"/>
                                        <ComboBox Name="CategoryComboBox" Width="300" Height="30" ToolTip="Оберіть категорію">
                                            <ComboBoxItem Content="Електроніка"/>
                                            <ComboBoxItem Content="Одяг"/>
                                            <ComboBoxItem Content="Взуття"/>
                                            <ComboBoxItem Content="Аксесуари"/>
                                            <ComboBoxItem Content="Іграшки"/>
                                            <ComboBoxItem Content="Меблі"/>
                                            <ComboBoxItem Content="Ремонт"/>
                                            <ComboBoxItem Content="Авто"/>
                                            <ComboBoxItem Content="Тварини"/>
                                            <ComboBoxItem Content="Хоббі і відпочинок"/>
                                            <ComboBoxItem Content="Спорт"/>
                                            <ComboBoxItem Content="Інше"/>
                                        </ComboBox>
                                    </StackPanel>

                                    <!-- Категорія для обміну -->
                                    <StackPanel Orientation="Horizontal" Margin="0,5">
                                        <Label Content="Категорія для обміну:" Width="206" VerticalAlignment="Center" Height="54"/>
                                        <ComboBox Name="ExchangeCategoryComboBox" Width="300" Height="30" ToolTip="Оберіть категорію для обміну">
                                            <ComboBoxItem Content="Електроніка"/>
                                            <ComboBoxItem Content="Одяг"/>
                                            <ComboBoxItem Content="Взуття"/>
                                            <ComboBoxItem Content="Аксесуари"/>
                                            <ComboBoxItem Content="Іграшки"/>
                                            <ComboBoxItem Content="Меблі"/>
                                            <ComboBoxItem Content="Ремонт"/>
                                            <ComboBoxItem Content="Авто"/>
                                            <ComboBoxItem Content="Тварини"/>
                                            <ComboBoxItem Content="Хоббі і відпочинок"/>
                                            <ComboBoxItem Content="Спорт"/>
                                            <ComboBoxItem Content="Інше"/>
                                        </ComboBox>
                                    </StackPanel>

                                    <!-- Загрузить фото -->
                                    <StackPanel Orientation="Horizontal" Margin="0,5">
                                        <Label Content="Фото:" Width="206" VerticalAlignment="Center"/>
                                        <Button Content="Загрузити фото" Width="300" Height="30" Style="{StaticResource CustomButtonStyle}" ToolTip="Оберіть фото для загрузки" Click="Button_Click"/>
                                        <Image x:Name="ThumbnailImage" Width="50" Height="50" Margin="10,0,0,0" Visibility="Collapsed"/>
                                    </StackPanel>

                                    <TextBox x:Name="imageTextBox" Visibility="Collapsed"/>

                                    <!-- Кнопка додавання -->
                                    <Button Content="Додати" Width="120" Height="40" Style="{StaticResource CustomButtonStyle}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,20" Click="Button_Click_1"/>
                                </StackPanel>
                            </Grid>
                        </ScrollViewer>
                    </TabItem>

                    <!-- Вкладка "Сповіщення" -->
                    <TabItem Header="Сповіщення" x:Name="NotificationsTab" Style="{StaticResource CustomTabItemStyle}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <StackPanel x:Name="NotificationsStackPanel" Background="White" Margin="20">
                                <!-- Заголовок -->
                                <TextBlock FontSize="28" FontWeight="Bold" Foreground="#333333" HorizontalAlignment="Left" Margin="0,0,0,20">
                Сповіщення
                                </TextBlock>

                                <!-- Підзаголовок: Пропозиції, отримані вами -->
                                <TextBlock Text="Пропозиції, отримані вами" FontSize="20" FontWeight="SemiBold" Foreground="#555555" Margin="0,0,0,10" />

                                <!-- Список пропозицій до вас -->
                                <Border Background="Black" BorderBrush="White" BorderThickness="1" CornerRadius="10" Padding="5" Margin="0,0,0,10">
                                    <ListView Name="OffersToMeListView" 
                          ItemsSource="{Binding OffersToMe}" 
                          Background="Black" 
                          Foreground="White" 
                          MouseDoubleClick="OffersToMeListView_MouseDoubleClick"
                          SelectionMode="Single">
                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <!-- Стандартное состояние -->
                                                <Setter Property="Background" Value="Black" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="Padding" Value="5" />
                                                <!-- Переходы состояний -->
                                                <Style.Triggers>
                                                    <!-- Состояние при наведении -->
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#222222" />
                                                        <!-- Темно-серый цвет -->
                                                        <Setter Property="Foreground" Value="White" />
                                                    </Trigger>
                                                    <!-- Состояние для выделенного элемента -->
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="Background" Value="#222222" />
                                                        <!-- Темно-серый цвет -->
                                                        <Setter Property="Foreground" Value="White" />
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                        <ListView.View>
                                            <GridView>
                                                <GridViewColumn Header="Запропонований товар" DisplayMemberBinding="{Binding ItemRequested.ItemName}" Width="200" />
                                                <GridViewColumn Header="Мій товар" DisplayMemberBinding="{Binding ItemOffered.ItemName}" Width="200" />
                                                <GridViewColumn Header="Відправник запиту" DisplayMemberBinding="{Binding Sender.Username}" Width="200" />
                                                <GridViewColumn Header="Статус" DisplayMemberBinding="{Binding Status}" Width="200" />
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                </Border>

                                <!-- Кнопки для першої таблиці -->
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,20" HorizontalAlignment="Right">
                                    <Button Content="Прийняти" Width="100" Margin="5" Height="35" Style="{StaticResource CustomButtonStyle}" Background="Green" Click="AcceptOffer_Click" />
                                    <Button Content="Відхилити" Width="100" Margin="5" Height="35" Style="{StaticResource CustomButtonStyle}" Background="Red" Click="RejectOffer_Click" />
                                    <Button Content="Видалити" Width="100" Margin="5" Height="35" Style="{StaticResource CustomButtonStyle}" Background="DeepSkyBlue" Click="DeleteOffer_Click" />
                                </StackPanel>

                                <!-- Підзаголовок: Пропозиції, зроблені вами -->
                                <TextBlock Text="Пропозиції, зроблені вами" FontSize="20" FontWeight="SemiBold" Foreground="#555555" Margin="0,0,0,10" />

                                <!-- Список ваших пропозицій -->
                                <Border Background="Black" BorderBrush="White" BorderThickness="1" CornerRadius="10" Padding="5" Margin="0,0,0,10">
                                    <ListView Name="MyOffersListView" 
                          ItemsSource="{Binding MyOffers}" 
                          Background="Black" 
                          Foreground="White" 
                          MouseDoubleClick="MyOffersListView_MouseDoubleClick"
                          SelectionMode="Single">
                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <!-- Стандартное состояние -->
                                                <Setter Property="Background" Value="Black" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="Padding" Value="5" />
                                                <!-- Переходы состояний -->
                                                <Style.Triggers>
                                                    <!-- Состояние при наведении -->
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#222222" />
                                                        <!-- Темно-серый цвет -->
                                                        <Setter Property="Foreground" Value="White" />
                                                    </Trigger>
                                                    <!-- Состояние для выделенного элемента -->
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="Background" Value="#222222" />
                                                        <!-- Темно-серый цвет -->
                                                        <Setter Property="Foreground" Value="White" />
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                        <ListView.View>
                                            <GridView>
                                                <GridViewColumn Header="Мій товар" DisplayMemberBinding="{Binding ItemRequested.ItemName}" Width="200" />
                                                <GridViewColumn Header="Запитуваний товар" DisplayMemberBinding="{Binding ItemOffered.ItemName}" Width="200" />
                                                <GridViewColumn Header="Отримувач запиту" DisplayMemberBinding="{Binding Receiver.Username}" Width="200" />
                                                <GridViewColumn Header="Статус" DisplayMemberBinding="{Binding Status}" Width="200" />
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                </Border>

                                <!-- Кнопки для другої таблиці -->
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,20">
                                    <Button Content="Видалити" Width="100" Margin="5" Height="35" Style="{StaticResource CustomButtonStyle}" Background="DeepSkyBlue" Click=" DeleteOffer_Click" />
                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>



                </TabControl>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>